---
import { Image } from 'astro:assets';
import '../styles/global.css';
import HelpCTA from './HelpCTA.astro';
import RadialGradient from './RadialGradient.astro';

interface Props {
    page: string;
    img?: string;
    imgDescr?: string;
}   

const {page, img, imgDescr = ''} = Astro.props;

let heading_start, heading_gradient, heading_finish;
let sectionHeight, headingWidth, topPosition = '0rem';

switch(page) {
    case 'eco':
        heading_start = 'Чтобы ';
        heading_gradient = 'быть полезным природе, заботиться ';
        heading_finish = 'о своём доме под названием планета Земля, можно';
        sectionHeight = '36rem';
        headingWidth = '55rem';
        break;
    case 'low-income-families':
        heading_start = 'Чтобы ';
        heading_gradient = 'быть полезным людям ';
        heading_finish = 'и поддержать проект, можно';
        sectionHeight = '30rem';
        headingWidth = '57.4375rem';
        break;
    case 'ride':
        heading_start = 'Чтобы ';
        heading_gradient = 'сделать мир спортивнее ';
        heading_finish = 'и поддержать проект, можно';
        sectionHeight = '39.4rem';
        headingWidth = '59rem';
        topPosition = '9.375rem';
        break;
}
---
<section class="help_section">
    <div class="help__container">
        {page === 'eco' && <RadialGradient topPosition="4.4375rem" leftPosition="43.375rem" />}
        {page === 'low-income-families' && <RadialGradient topPosition="12.8125rem" leftPosition="58.9375rem" />}
        {page === 'ride' && 
            <>
                <RadialGradient topPosition="-21.0625rem" leftPosition="-22.5rem" />
                <RadialGradient topPosition="2.625rem" leftPosition="60.125rem" />
            </>
        }
        {heading_start && <h2 class="help__heading">{heading_start}<span class="gradient_span">{heading_gradient}</span>{heading_finish}</h2>}
        <HelpCTA />
        {img && <Image src={img} alt={imgDescr} class='help__img' loading='eager'/>}
    </div>
</section>

<style define:vars={{sectionHeight, headingWidth, topPosition}}>
    .help_section {
        --sectionHeight: 36rem;
        --headingWidth: 55rem;
        --topPosition: 0rem;
    }

    section {
        display: block;
        position: relative;
        width: 100vw;
        height: var(--sectionHeight);
    }

    .help__container {
        display: block;
        position: absolute;
        width: var(--reduced-width);
        height: inherit;
        top: var(--topPosition);
        left: calc((100vw - var(--reduced-width)) / 2);
    }

    .help__heading {
        display: inline-block;
        width: var(--headingWidth);
        line-height: 4rem;
        font-family: var(--font-lulo-bold);
        font-size: 3.125rem;
        margin-bottom: 5rem;
    }

    .help__img {
        display: block;
        position: absolute;
        bottom: 0;
        right: -10rem;
        height: 22rem;
        width: 13rem;
    }
</style>
