---
import '../styles/global.css';
import { Image } from 'astro:assets';
import imagesData from '../data/concepts.json';
import RadialGradient from './RadialGradient.astro';

interface Props {
    mainHeading: string;
    usualHeading?: string;
    subHeading?: string;
    text: string;
    pagePath: string;
}

const { mainHeading, subHeading, text, pagePath, usualHeading } = Astro.props;

const pageConfig = {
    'eco': {
        containerHeight: 'var(--container-height-eco)',
        gap: 'var(--gap)',
        fontSize: 'var(--font-size-eco)',
        color: 'var(--dark-grey)',
        sectionHeight: 'var(--section-height-eco)',
        topPosition: 'var(--top-position-eco)',
        imgContainerHeight: 'var(--img-container-height-eco)',
        horizontalImgHeight: 'var(--horizontal-img-height-eco)',
    },
    'low-income-families': {
        containerHeight: 'var(--container-height-low-income-families)',
        gap: 'var(--gap)',
        fontSize: 'var(--font-size-low-income-families)',
        color: 'black',
        sectionHeight: 'var(--section-height-low-income-families)',
        topPosition: 'var(--top-position-low-income-families)',
        imgContainerHeight: 'var(--img-container-height-low-income-families)',
        horizontalImgHeight: 'var(--horizontal-img-height-low-income-families)',
    },
    'longlongride': {
        containerHeight: 'var(--container-height-longlongride)',
        gap: 'var(--gap)',
        fontSize: 'var(--font-size-longlongride)',
        color: 'var(--dark-grey)',
        sectionHeight: 'var(--section-height-longlongride)',
        topPosition: 'var(--top-position-longlongride)',
        imgContainerHeight: 'var(--img-container-height-longlongride)',
        horizontalImgHeight: 'var(--horizontal-img-height-longlongride)',
    },
};

const config = pageConfig[pagePath] || pageConfig['eco'];
---
<section class="eco-concept">
    <div class="eco-concept__container">
        {pagePath === 'low-income-families' && <RadialGradient topPosition="0" leftPosition="24.25rem" />}
        {pagePath === 'longlongride' && <RadialGradient topPosition="17.1875rem" leftPosition="25.1875rem" />}
        <div class="eco-concept__text">
            {usualHeading ? (
                <h2 class="eco-concept__heading">{usualHeading}<span class="gradient_span">{mainHeading}</span></h2>
            ) : (
                <h2 class="eco-concept__heading"><span class="gradient_span">{mainHeading}</span></h2>
            )}
            {subHeading && <h3 class="eco-concept__subheading" set:html={subHeading} />}
            <p class="eco-concept__description" set:html={text} />
        </div>
        <div class="eco-concept__images">
            <div class="eco-concept__images-1">
               {imagesData.filter(image => image.category === pagePath && image.imageNumber < 3).map(image => (
                    <div class="eco-concept__img-1">
                        <Image src={import(image.imagePath)} alt={image.imageDescr} loading='eager' class='eco-concept__img-1'/>
                    </div>
               ))}
            </div>
            <div class="eco-concept__images-2">
                {imagesData.filter(image => image.category === pagePath && image.imageNumber === 3).map(image => (
                    <div class="eco-concept__img-2">
                        <Image src={import(image.imagePath)} alt={image.imageDescr} loading='eager' class='eco-concept__img-2'/>
                    </div>
                ))}
            </div>
        </div>
    </div>
</section>

<style define:vars={{
    containerHeight: config.containerHeight,
    gap: config.gap,
    fontSize: config.fontSize,
    color: config.color,
    sectionHeight: config.sectionHeight,
    topPosition: config.topPosition,
    imgContainerHeight: config.imgContainerHeight,
    horizontalImgHeight: config.horizontalImgHeight,
}}>
    .eco-concept {       
        /* Sizes */
        --section-height-eco: 25rem;
        --section-height-low-income-families: 37.5rem;
        --section-height-longlongride: 38rem;

        --container-height-eco: 20rem;
        --container-height-low-income-families: 21.875rem;
        --container-height-longlongride: 26.875rem;

        --gap: 1.25rem;

        --font-size-eco: 1rem;
        --font-size-low-income-families: 1.5rem;
        --font-size-longlongride: 1rem;

        --top-position-eco: 0rem;
        --top-position-low-income-families: 6.25rem;
        --top-position-longlongride: 6.25rem;

        --img-container-height-eco: 18.875rem;
        --img-container-height-low-income-families: 18.875rem;
        --img-container-height-longlongride: 25.5rem;

        --horizontal-img-height-eco: 8.8rem;
        --horizontal-img-height-low-income-families: 8.8rem;
        --horizontal-img-height-longlongride: 12.1rem;

        --h2-font-size: 3.125rem;
        --h2-line-height: 3.5rem;
        --h2-margin-bottom: 2.5rem;

        --h3-font-size: 1.5rem;
        --h3-margin-bottom: 1.25rem;
        --h3-width: 34.6rem;

        --text-width: 37.5rem;

        --images-width: 28.5rem;
        --images-1-width: 16.6rem;
        --images-2-width: 10.7rem;
    }

    .eco-concept {
        display: block;
        position: relative;
        width: 100vw;
        height: var(--sectionHeight);
    }

    .eco-concept__container {
        position: absolute;
        top: var(--topPosition);
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        width: var(--reduced-width);
        height: var(--containerHeight);
    }

    .eco-concept__text {
        display: inline-block;
        width: var(--text-width);
        height: inherit;
    }

    h2 {
        font-family: var(--font-lulo-bold);
        font-size: var(--h2-font-size);
        line-height: var(--h2-line-height);
        margin-bottom: var(--h2-margin-bottom);
        color: black;
    }

    h3 {
        display: inline-block;
        width: var(--h3-width);
        font-family: var(--font-inter);
        font-size: var(--h3-font-size);
        margin-bottom: var(--h3-margin-bottom);
    }

    p {
        font-family: var(--font-inter);
        font-size: var(--fontSize);
        color: var(--color);
    }

    img {
        object-fit: cover;
    }

    .eco-concept__images {
        display: flex;
        justify-content: space-between;
        width: var(--images-width);
        height: var(--imgContainerHeight);
    }

    .eco-concept__images-1 {
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-content: space-between;
        row-gap: 1.25rem;
        width: var(--images-1-width);
        height: inherit;
        border-radius: var(--border-radius);
    }

    .eco-concept__img-1 {
        display: block;
        width: inherit;
        height: var(--horizontalImgHeight);
        border-radius: inherit;
        box-shadow: var(--box-shadow);
    }

    .eco-concept__img-1 img {
        display: block;
        width: inherit;
        height: inherit;
        border-radius: inherit;
    }

    .eco-concept__images-2 {
        display: block;
        width: var(--images-2-width);
        height: inherit;
        border-radius: var(--border-radius);
    }

    .eco-concept__img-2 {
        display: block;
        width: inherit;
        height: inherit;
        border-radius: inherit;
        box-shadow: var(--box-shadow);
    }

    .eco-concept__img-2 img {
        display: block;
        width: inherit;
        height: inherit;
        border-radius: inherit;
    }
</style>
